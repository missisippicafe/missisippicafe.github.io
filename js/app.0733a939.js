(function(e){function t(t){for(var c,a,u=t[0],i=t[1],d=t[2],l=0,b=[];l<u.length;l++)a=u[l],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&b.push(r[a][0]),r[a]=0;for(c in i)Object.prototype.hasOwnProperty.call(i,c)&&(e[c]=i[c]);s&&s(t);while(b.length)b.shift()();return o.push.apply(o,d||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],c=!0,u=1;u<n.length;u++){var i=n[u];0!==r[i]&&(c=!1)}c&&(o.splice(t--,1),e=a(a.s=n[0]))}return e}var c={},r={app:0},o=[];function a(t){if(c[t])return c[t].exports;var n=c[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=c,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)a.d(n,c,function(t){return e[t]}.bind(null,c));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],i=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var s=i;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"09ff":function(e,t,n){"use strict";n("c6e3")},"165c":function(e,t,n){},"3e00":function(e,t,n){"use strict";n("9ad8")},4392:function(e,t,n){},"4b69":function(e,t,n){"use strict";n("4392")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("a15b"),n("d81d"),n("ac1f"),n("1276");var c=n("7a23");function r(e,t,n,r,o,a){var u=Object(c["u"])("router-view");return Object(c["n"])(),Object(c["d"])(u)}var o={name:"App",created:function(){this.$store.commit("initializeApp")}};n("cb0b");o.render=r;var a=o,u=n("6c02"),i=Object(c["C"])("data-v-5277fd76");Object(c["q"])("data-v-5277fd76");var d={class:"home"};Object(c["o"])();var s=i((function(e,t,n,r,o,a){return Object(c["n"])(),Object(c["d"])("div",d,[(Object(c["n"])(!0),Object(c["d"])(c["a"],null,Object(c["t"])(a.desks,(function(e){return Object(c["n"])(),Object(c["d"])("div",{class:["desk empty",{filled:a.isFilled(e.num)}],key:"desk-".concat(e.num),onClick:function(t){return a.goto(e.num)}},[Object(c["e"])("span",null,"Masa "+Object(c["w"])(e.num),1)],10,["onClick"])})),128))])})),l=n("2909"),b=(n("4e82"),n("4de4"),{name:"Home",computed:{desks:function(){return Object(l["a"])(this.$store.state.desks).sort((function(e,t){return e.num-t.num}))}},methods:{isFilled:function(e){var t=this.$store.state.orders.filter((function(t){return t.deskNum===e&&!t.isBilled}));return t.length>0},goto:function(e){this.$router.push("/desk/".concat(e))}}});n("e53d");b.render=s,b.__scopeId="data-v-5277fd76";var p=b,f=Object(c["C"])("data-v-92c44b30");Object(c["q"])("data-v-92c44b30");var m={class:"desk"},O={class:"name-bar"},j={class:"actions"},v={class:"orders"};Object(c["o"])();var h=f((function(e,t,n,r,o,a){return Object(c["n"])(),Object(c["d"])("div",m,[Object(c["e"])("div",O,"Masa "+Object(c["w"])(e.$route.params.id),1),Object(c["e"])("div",j,[Object(c["e"])("div",{onClick:t[1]||(t[1]=function(){return a.order&&a.order.apply(a,arguments)})},"Sipariş"),Object(c["e"])("div",{onClick:t[2]||(t[2]=function(){return a.checkout&&a.checkout.apply(a,arguments)})},"Hesap")]),Object(c["e"])("div",v,[(Object(c["n"])(!0),Object(c["d"])(c["a"],null,Object(c["t"])(a.orders,(function(e){return Object(c["n"])(),Object(c["d"])("div",{key:"order-".concat(e.id),class:"order"},[Object(c["e"])("div",null,Object(c["w"])(a.getProductName(e.productNum)),1),Object(c["e"])("div",null,"x"+Object(c["w"])(e.amount),1)])})),128))])])})),k=(n("a9e3"),n("7db0"),n("b0c0"),{name:"Desk",computed:{orders:function(){var e=this;return this.$store.state.orders.filter((function(t){return t.deskNum===Number(e.$route.params.id)&&!t.isBilled}))}},methods:{order:function(){this.$router.push("/desk/".concat(this.$route.params.id,"/order"))},checkout:function(){this.$store.dispatch("checkout",this.orders)},getProductName:function(e){var t=this.$store.state.products.find((function(t){return t.num===e}));return t.name}}});n("fa19");k.render=h,k.__scopeId="data-v-92c44b30";var w=k,g=Object(c["C"])("data-v-3c7e4bac");Object(c["q"])("data-v-3c7e4bac");var y={class:"form"},C={class:"row"},P=Object(c["e"])("label",{for:"product"},"Ürün",-1),$={class:"row"},A=Object(c["e"])("label",{for:"amount"},"Adet",-1),N={class:"row"},_={class:"increment-buttons"},x={class:"row"};Object(c["o"])();var I=g((function(e,t,n,r,o,a){return Object(c["n"])(),Object(c["d"])("div",y,[Object(c["e"])("div",C,[P,Object(c["B"])(Object(c["e"])("select",{id:"product",ref:"product","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.productId=t})},[(Object(c["n"])(!0),Object(c["d"])(c["a"],null,Object(c["t"])(a.products,(function(e){return Object(c["n"])(),Object(c["d"])("option",{key:"product-".concat(e.num),value:e.num},Object(c["w"])(e.name),9,["value"])})),128))],512),[[c["y"],e.productId]])]),Object(c["e"])("div",$,[A,Object(c["B"])(Object(c["e"])("input",{type:"number",id:"amount","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.amount=t})},null,512),[[c["z"],e.amount]])]),Object(c["e"])("div",N,[Object(c["e"])("div",_,[Object(c["e"])("div",{class:"decrease",onClick:t[3]||(t[3]=function(){return a.decreaseAmount&&a.decreaseAmount.apply(a,arguments)})},"-"),Object(c["e"])("div",{class:"increase",onClick:t[4]||(t[4]=function(){return a.increaseAmount&&a.increaseAmount.apply(a,arguments)})},"+")])]),Object(c["e"])("div",x,[Object(c["e"])("div",{onClick:t[5]||(t[5]=function(){return a.add&&a.add.apply(a,arguments)}),class:"button"},"Ekle")])])})),q={name:"Order",data:function(){return{amount:1,productId:1}},computed:{products:function(){return this.$store.state.products}},methods:{add:function(){var e={deskNum:Number(this.$route.params.id),productNum:Number(this.productId),amount:Number(this.amount)};this.$store.dispatch("createOrder",e),this.$router.go(-1)},increaseAmount:function(){this.amount++},decreaseAmount:function(){this.amount--}}};n("4b69");q.render=I,q.__scopeId="data-v-3c7e4bac";var S=q,z=n("b874"),D=n.n(z),M=Object(c["C"])("data-v-29883f78");Object(c["q"])("data-v-29883f78");var B={class:"bills"},L=Object(c["e"])("div",{class:"logo"},[Object(c["e"])("img",{src:D.a,alt:"redkitlogo"})],-1),E=Object(c["e"])("div",{class:"bill-title"},"Missisippi Cafe",-1),R={class:"row info"},U={class:"date-string"},H=Object(c["e"])("div",{class:"divider"},null,-1),T={class:"row"},V=Object(c["e"])("div",null,"TOPLAM",-1);Object(c["o"])();var F=M((function(e,t,n,r,o,a){return Object(c["n"])(),Object(c["d"])("div",B,[(Object(c["n"])(!0),Object(c["d"])(c["a"],null,Object(c["t"])(a.billsReversed,(function(e){return Object(c["n"])(),Object(c["d"])("div",{key:"bill-".concat(e.id),class:"bill"},[L,E,Object(c["e"])("div",R,[Object(c["e"])("div",null,"Masa "+Object(c["w"])(e.deskNum),1),Object(c["e"])("div",U,[Object(c["e"])("div",null,Object(c["w"])(new Date(1e3*e.time.seconds).toLocaleDateString()),1),Object(c["e"])("div",null,Object(c["w"])(new Date(1e3*e.time.seconds).toLocaleTimeString()),1)])]),(Object(c["n"])(!0),Object(c["d"])(c["a"],null,Object(c["t"])(e.orders,(function(e,t){return Object(c["n"])(),Object(c["d"])("div",{key:"bill-orders-".concat(t),class:"row product"},[Object(c["e"])("div",null,Object(c["w"])(e.amount)+"x "+Object(c["w"])(e.product),1),Object(c["e"])("div",null,Object(c["w"])(e.subtotal)+"₺",1)])})),128)),H,Object(c["e"])("div",T,[V,Object(c["e"])("div",null,Object(c["w"])(e.total)+"₺",1)])])})),128))])})),G=(n("a434"),{name:"Checkout",data:function(){return{billCount:0}},computed:{bills:function(){return this.$store.state.bills},billsReversed:function(){return Object(l["a"])(this.bills).sort((function(e,t){return e.time.seconds===t.time.seconds?e.time.nanoseconds-t.time.nanoseconds:e.time.seconds-t.time.seconds})).reverse().splice(0,5)}},updated:function(){this.billCount||(this.billCount=this.bills.length),this.billCount!==this.bills.length&&(this.billCount=this.bills.length,console.log("yazdır",this.billCount,this.bills.length),window.print())}});n("6d69");G.render=F,G.__scopeId="data-v-29883f78";var J=G,K=Object(c["C"])("data-v-bcdbaa4a");Object(c["q"])("data-v-bcdbaa4a");var Y={class:"admin-page"},Q={type:"text",ref:"newProductName",placeholder:"İsim"},W={type:"number",ref:"newProductPrice",placeholder:"Fiyat"};Object(c["o"])();var X=K((function(e,t,n,r,o,a){return Object(c["n"])(),Object(c["d"])("div",Y,[Object(c["e"])("div",null,[(Object(c["n"])(!0),Object(c["d"])(c["a"],null,Object(c["t"])(a.products,(function(e){return Object(c["n"])(),Object(c["d"])("div",{key:"product-".concat(e.num)},[Object(c["e"])("input",{type:"text",value:e.name,ref:"pname-".concat(e.id)},null,8,["value"]),Object(c["e"])("input",{type:"number",value:e.price,ref:"pprice-".concat(e.id),step:"0.25"},null,8,["value"]),Object(c["e"])("button",{onClick:function(t){return a.updateProduct(e.id)}},"Güncelle",8,["onClick"])])})),128)),Object(c["e"])("div",null,[Object(c["e"])("input",Q,null,512),Object(c["e"])("input",W,null,512),Object(c["e"])("button",{onClick:t[1]||(t[1]=function(){return a.addProduct&&a.addProduct.apply(a,arguments)})},"Ürün Ekle")])]),Object(c["e"])("div",null,[(Object(c["n"])(!0),Object(c["d"])(c["a"],null,Object(c["t"])(a.desks,(function(e){return Object(c["n"])(),Object(c["d"])("div",{key:"desk-".concat(e.num)}," Masa "+Object(c["w"])(e.num),1)})),128)),Object(c["e"])("button",{onClick:t[2]||(t[2]=function(){return a.addDesk&&a.addDesk.apply(a,arguments)})},"Masa Ekle")])])})),Z={name:"AdminPage",computed:{desks:function(){return Object(l["a"])(this.$store.state.desks).sort((function(e,t){return e.num-t.num}))},products:function(){return Object(l["a"])(this.$store.state.products).sort((function(e,t){return e.name.localeCompare(t.name)}))}},methods:{addProduct:function(){var e={name:this.$refs["newProductName"].value.toCapitalized(),price:Number(this.$refs["newProductPrice"].value)};this.$refs["newProductName"].value="",this.$refs["newProductPrice"].value="",this.$store.commit("addProduct",e)},addDesk:function(){this.$store.commit("addDesk")},updateProduct:function(e){var t={id:e,name:this.$refs["pname-"+e].value.toCapitalized(),price:Number(this.$refs["pprice-"+e].value)};this.$store.commit("updateProduct",t)}}};n("3e00");Z.render=X,Z.__scopeId="data-v-bcdbaa4a";var ee=Z,te=Object(c["C"])("data-v-76b9486f");Object(c["q"])("data-v-76b9486f");var ne={class:"login-form"},ce={class:"row"},re=Object(c["e"])("label",{for:"email"},"Email",-1),oe={class:"row"},ae=Object(c["e"])("label",{for:"password"},"Password",-1),ue={class:"row"};Object(c["o"])();var ie=te((function(e,t,n,r,o,a){return Object(c["n"])(),Object(c["d"])("div",ne,[Object(c["e"])("div",ce,[re,Object(c["B"])(Object(c["e"])("input",{type:"email",id:"email","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.email=t})},null,512),[[c["z"],e.email]])]),Object(c["e"])("div",oe,[ae,Object(c["B"])(Object(c["e"])("input",{type:"password",id:"password","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.password=t})},null,512),[[c["z"],e.password]])]),Object(c["e"])("div",ue,[Object(c["e"])("div",{class:"button",onClick:t[3]||(t[3]=function(){return a.login&&a.login.apply(a,arguments)})},"Giriş")])])})),de=n("1da1"),se=(n("96cf"),n("5319"),n("260b")),le=(n("e71f"),n("ea7b"),{apiKey:"AIzaSyCORH4f77olQHU5tYYzkdeqg4yG4K0u9sE",authDomain:"redkit-db3d9.firebaseapp.com",projectId:"redkit-db3d9",storageBucket:"redkit-db3d9.appspot.com",messagingSenderId:"778599905049",appId:"1:778599905049:web:89692e4d3c971becacf788"}),be=se["a"].initializeApp(le),pe=be,fe={name:"Auth",data:function(){return{email:"",password:""}},methods:{login:function(){var e=this;return Object(de["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,pe.auth().signInWithEmailAndPassword(e.email,e.password);case 3:e.$router.replace("/"),t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),alert(t.t0.message);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()}}};n("09ff");fe.render=ie,fe.__scopeId="data-v-76b9486f";var me,Oe=fe,je=[{path:"/",name:"Home",component:p,meta:{requiresAuth:!0}},{path:"/desk/:id",name:"Desk",component:w,meta:{requiresAuth:!0}},{path:"/desk/:id/order",name:"Order",component:S,meta:{requiresAuth:!0}},{path:"/checkout",name:"Checkout",component:J,meta:{requiresAuth:!0}},{path:"/admin",name:"Admin",component:ee,meta:{requiresAuth:!0}},{path:"/login",name:"Login",component:Oe}],ve=Object(u["a"])({history:Object(u["b"])("/"),routes:je}),he=ve,ke=n("5530"),we=(n("159b"),n("5502")),ge=n("d4ec"),ye=n("bee2"),Ce=pe.firestore(),Pe=function(){function e(t){Object(ge["a"])(this,e),this.collection=Ce.collection(t)}return Object(ye["a"])(e,[{key:"create",value:function(e){return this.collection.add(e)}},{key:"find",value:function(){var e=Object(de["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.collection.doc(t).get();case 2:return n=e.sent,e.abrupt("return",n.exists?n.data():null);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"update",value:function(e,t){return this.collection.doc(e).update(t)}},{key:"destroy",value:function(e){return this.collection.doc(e).delete()}},{key:"useLoad",value:function(){var e=Object(c["s"])([]),t=this.collection.onSnapshot((function(t){e.value=t.docs.map((function(e){return Object(ke["a"])({id:e.id},e.data())}))}));return Object(c["m"])(t),e}}]),e}(),$e=Pe,Ae=Object(we["a"])({state:{desks:[],products:[],orders:[]},mutations:{initializeApp:function(e){for(var t=["desk","product","order","bill"],n=0,c=t;n<c.length;n++){var r=c[n],o=new $e(r+"s");e["".concat(r,"Collection")]=o,e[r+"s"]=o.useLoad()}},addProduct:function(e,t){var n=t.name,c=t.price;e.productCollection.create({name:n,price:c,num:e.products.length+1})},addDesk:function(e){e.deskCollection.create({num:e.desks.length+1})},updateProduct:function(e,t){var n=t.id,c=t.name,r=t.price;e.productCollection.update(n,{name:c,price:r})}},actions:{checkout:function(e,t){var n=e.state,c=[],r=0;t.forEach((function(e){var t=n.products.find((function(t){return t.num===e.productNum}));c.push({product:t.name,price:t.price,amount:e.amount,subtotal:t.price*e.amount}),r+=t.price*e.amount,n.orderCollection.update(e.id,Object(ke["a"])(Object(ke["a"])({},e),{},{isBilled:!0}))})),n.billCollection.create({orders:c,total:r,deskNum:t[0].deskNum,time:new Date})},createOrder:function(e,t){var n=e.state,c=n.orders.find((function(e){return e.deskNum===t.deskNum&&e.productNum===t.productNum&&!e.isBilled}));if(c){var r=Object(ke["a"])(Object(ke["a"])({},c),{},{amount:c.amount+t.amount});n.orderCollection.update(c.id,r)}else n.orderCollection.create(t)}},modules:{}});String.prototype.toCapitalized=function(){return this.split(" ").map((function(e){return e.substring(0,1).toLocaleUpperCase()+e.toLocaleLowerCase().substring(1)})).join(" ")},he.beforeEach((function(e,t,n){var c=e.matched.some((function(e){return e.meta.requiresAuth})),r=pe.auth().currentUser;c&&!r?n("/login"):n()})),pe.auth().onAuthStateChanged((function(){me||(me=Object(c["c"])(a).use(Ae).use(he).mount("#app"))}))},"6d69":function(e,t,n){"use strict";n("165c")},"9ad8":function(e,t,n){},"9e4b":function(e,t,n){},b874:function(e,t,n){e.exports=n.p+"img/redkit.35180d40.jpeg"},c280:function(e,t,n){},c6e3:function(e,t,n){},cb0b:function(e,t,n){"use strict";n("c280")},dff3:function(e,t,n){},e53d:function(e,t,n){"use strict";n("9e4b")},fa19:function(e,t,n){"use strict";n("dff3")}});
//# sourceMappingURL=app.0733a939.js.map