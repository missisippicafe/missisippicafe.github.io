(function(e){function t(t){for(var r,i,a=t[0],u=t[1],s=t[2],l=0,b=[];l<a.length;l++)i=a[l],Object.prototype.hasOwnProperty.call(c,i)&&c[i]&&b.push(c[i][0]),c[i]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);d&&d(t);while(b.length)b.shift()();return o.push.apply(o,s||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,a=1;a<n.length;a++){var u=n[a];0!==c[u]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},c={app:0},o=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],u=a.push.bind(a);a.push=t,a=a.slice();for(var s=0;s<a.length;s++)t(a[s]);var d=u;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"09ff":function(e,t,n){"use strict";n("c6e3")},"165c":function(e,t,n){},"460c":function(e,t,n){"use strict";n("57d0")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23");function c(e,t,n,c,o,i){var a=Object(r["u"])("router-view");return Object(r["n"])(),Object(r["d"])(a)}var o={name:"App",created:function(){this.$store.commit("initializeApp")}};n("cb0b");o.render=c;var i=o,a=n("6c02"),u=Object(r["C"])("data-v-5277fd76");Object(r["q"])("data-v-5277fd76");var s={class:"home"};Object(r["o"])();var d=u((function(e,t,n,c,o,i){return Object(r["n"])(),Object(r["d"])("div",s,[(Object(r["n"])(!0),Object(r["d"])(r["a"],null,Object(r["t"])(i.desks,(function(e){return Object(r["n"])(),Object(r["d"])("div",{class:["desk empty",{filled:i.isFilled(e.num)}],key:"desk-".concat(e.num),onClick:function(t){return i.goto(e.num)}},[Object(r["e"])("span",null,"Masa "+Object(r["w"])(e.num),1)],10,["onClick"])})),128))])})),l=n("2909"),b=(n("4e82"),n("4de4"),{name:"Home",computed:{desks:function(){return Object(l["a"])(this.$store.state.desks).sort((function(e,t){return e.num-t.num}))}},methods:{isFilled:function(e){var t=this.$store.state.orders.filter((function(t){return t.deskNum===e&&!t.isBilled}));return t.length>0},goto:function(e){this.$router.push("/desk/".concat(e))}}});n("e53d");b.render=d,b.__scopeId="data-v-5277fd76";var f=b,p=Object(r["C"])("data-v-92c44b30");Object(r["q"])("data-v-92c44b30");var m={class:"desk"},O={class:"name-bar"},j={class:"actions"},v={class:"orders"};Object(r["o"])();var h=p((function(e,t,n,c,o,i){return Object(r["n"])(),Object(r["d"])("div",m,[Object(r["e"])("div",O,"Masa "+Object(r["w"])(e.$route.params.id),1),Object(r["e"])("div",j,[Object(r["e"])("div",{onClick:t[1]||(t[1]=function(){return i.order&&i.order.apply(i,arguments)})},"Sipariş"),Object(r["e"])("div",{onClick:t[2]||(t[2]=function(){return i.checkout&&i.checkout.apply(i,arguments)})},"Hesap")]),Object(r["e"])("div",v,[(Object(r["n"])(!0),Object(r["d"])(r["a"],null,Object(r["t"])(i.orders,(function(e){return Object(r["n"])(),Object(r["d"])("div",{key:"order-".concat(e.id),class:"order"},[Object(r["e"])("div",null,Object(r["w"])(i.getProductName(e.productNum)),1),Object(r["e"])("div",null,"x"+Object(r["w"])(e.amount),1)])})),128))])])})),k=(n("a9e3"),n("7db0"),n("b0c0"),{name:"Desk",computed:{orders:function(){var e=this;return this.$store.state.orders.filter((function(t){return t.deskNum===Number(e.$route.params.id)&&!t.isBilled}))}},methods:{order:function(){this.$router.push("/desk/".concat(this.$route.params.id,"/order"))},checkout:function(){this.$store.dispatch("checkout",this.orders)},getProductName:function(e){var t=this.$store.state.products.find((function(t){return t.num===e}));return t.name}}});n("fa19");k.render=h,k.__scopeId="data-v-92c44b30";var w=k,g=Object(r["C"])("data-v-0fefb29f");Object(r["q"])("data-v-0fefb29f");var y={class:"form"},C={class:"row"},N=Object(r["e"])("label",{for:"product"},"Ürün",-1),$={class:"row"},I=Object(r["e"])("label",{for:"amount"},"Adet",-1),_={class:"row"};Object(r["o"])();var x=g((function(e,t,n,c,o,i){return Object(r["n"])(),Object(r["d"])("div",y,[Object(r["e"])("div",C,[N,Object(r["B"])(Object(r["e"])("select",{id:"product",ref:"product","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.productId=t})},[(Object(r["n"])(!0),Object(r["d"])(r["a"],null,Object(r["t"])(i.products,(function(e){return Object(r["n"])(),Object(r["d"])("option",{key:"product-".concat(e.num),value:e.num},Object(r["w"])(e.name),9,["value"])})),128))],512),[[r["y"],e.productId]])]),Object(r["e"])("div",$,[I,Object(r["B"])(Object(r["e"])("input",{type:"number",id:"amount","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.amount=t})},null,512),[[r["z"],e.amount]])]),Object(r["e"])("div",_,[Object(r["e"])("div",{onClick:t[3]||(t[3]=function(){return i.add&&i.add.apply(i,arguments)}),class:"button"},"Ekle")])])})),A={name:"Order",data:function(){return{amount:1,productId:1}},computed:{products:function(){return this.$store.state.products}},methods:{add:function(){var e={deskNum:Number(this.$route.params.id),productNum:Number(this.productId),amount:Number(this.amount)};this.$store.dispatch("createOrder",e),this.$router.go(-1)}}};n("460c");A.render=x,A.__scopeId="data-v-0fefb29f";var P=A,S=n("b874"),q=n.n(S),B=Object(r["C"])("data-v-29883f78");Object(r["q"])("data-v-29883f78");var D={class:"bills"},M=Object(r["e"])("div",{class:"logo"},[Object(r["e"])("img",{src:q.a,alt:"redkitlogo"})],-1),z=Object(r["e"])("div",{class:"bill-title"},"Missisippi Cafe",-1),E={class:"row info"},L={class:"date-string"},R=Object(r["e"])("div",{class:"divider"},null,-1),U={class:"row"},H=Object(r["e"])("div",null,"TOPLAM",-1);Object(r["o"])();var V=B((function(e,t,n,c,o,i){return Object(r["n"])(),Object(r["d"])("div",D,[(Object(r["n"])(!0),Object(r["d"])(r["a"],null,Object(r["t"])(i.billsReversed,(function(e){return Object(r["n"])(),Object(r["d"])("div",{key:"bill-".concat(e.id),class:"bill"},[M,z,Object(r["e"])("div",E,[Object(r["e"])("div",null,"Masa "+Object(r["w"])(e.deskNum),1),Object(r["e"])("div",L,[Object(r["e"])("div",null,Object(r["w"])(new Date(1e3*e.time.seconds).toLocaleDateString()),1),Object(r["e"])("div",null,Object(r["w"])(new Date(1e3*e.time.seconds).toLocaleTimeString()),1)])]),(Object(r["n"])(!0),Object(r["d"])(r["a"],null,Object(r["t"])(e.orders,(function(e,t){return Object(r["n"])(),Object(r["d"])("div",{key:"bill-orders-".concat(t),class:"row product"},[Object(r["e"])("div",null,Object(r["w"])(e.amount)+"x "+Object(r["w"])(e.product),1),Object(r["e"])("div",null,Object(r["w"])(e.subtotal)+"₺",1)])})),128)),R,Object(r["e"])("div",U,[H,Object(r["e"])("div",null,Object(r["w"])(e.total)+"₺",1)])])})),128))])})),T=(n("a434"),{name:"Checkout",data:function(){return{billCount:0}},computed:{bills:function(){return this.$store.state.bills},billsReversed:function(){return Object(l["a"])(this.bills).sort((function(e,t){return e.time.seconds===t.time.seconds?e.time.nanoseconds-t.time.nanoseconds:e.time.seconds-t.time.seconds})).reverse().splice(0,5)}},updated:function(){this.billCount||(this.billCount=this.bills.length),this.billCount!==this.bills.length&&(this.billCount=this.bills.length,console.log("yazdır",this.billCount,this.bills.length),window.print())}});n("6d69");T.render=V,T.__scopeId="data-v-29883f78";var F=T,G=Object(r["C"])("data-v-76b9486f");Object(r["q"])("data-v-76b9486f");var J={class:"login-form"},Y={class:"row"},Z=Object(r["e"])("label",{for:"email"},"Email",-1),K={class:"row"},Q=Object(r["e"])("label",{for:"password"},"Password",-1),W={class:"row"};Object(r["o"])();var X=G((function(e,t,n,c,o,i){return Object(r["n"])(),Object(r["d"])("div",J,[Object(r["e"])("div",Y,[Z,Object(r["B"])(Object(r["e"])("input",{type:"email",id:"email","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.email=t})},null,512),[[r["z"],e.email]])]),Object(r["e"])("div",K,[Q,Object(r["B"])(Object(r["e"])("input",{type:"password",id:"password","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.password=t})},null,512),[[r["z"],e.password]])]),Object(r["e"])("div",W,[Object(r["e"])("div",{class:"button",onClick:t[3]||(t[3]=function(){return i.login&&i.login.apply(i,arguments)})},"Giriş")])])})),ee=n("1da1"),te=(n("96cf"),n("ac1f"),n("5319"),n("260b")),ne=(n("e71f"),n("ea7b"),{apiKey:"AIzaSyD9I2d4j0kUY0ZjV0biD8oZ2zMDk6E3cLQ",authDomain:"redkit-firestore.firebaseapp.com",projectId:"redkit-firestore",storageBucket:"redkit-firestore.appspot.com",messagingSenderId:"255893033097",appId:"1:255893033097:web:e1743e80c862222011b658",measurementId:"G-2FYH9GHE7B"}),re=te["a"].initializeApp(ne),ce=re,oe={name:"Auth",data:function(){return{email:"",password:""}},methods:{login:function(){var e=this;return Object(ee["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ce.auth().signInWithEmailAndPassword(e.email,e.password);case 3:e.$router.replace("/"),t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),alert(t.t0.message);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()}}};n("09ff");oe.render=X,oe.__scopeId="data-v-76b9486f";var ie,ae=oe,ue=[{path:"/",name:"Home",component:f,meta:{requiresAuth:!0}},{path:"/desk/:id",name:"Desk",component:w,meta:{requiresAuth:!0}},{path:"/desk/:id/order",name:"Order",component:P,meta:{requiresAuth:!0}},{path:"/checkout",name:"Checkout",component:F,meta:{requiresAuth:!0}},{path:"/login",name:"Login",component:ae}],se=Object(a["a"])({history:Object(a["b"])("/"),routes:ue}),de=se,le=n("5530"),be=(n("159b"),n("5502")),fe=n("d4ec"),pe=n("bee2"),me=(n("d81d"),ce.firestore()),Oe=function(){function e(t){Object(fe["a"])(this,e),this.collection=me.collection(t)}return Object(pe["a"])(e,[{key:"create",value:function(e){return this.collection.add(e)}},{key:"find",value:function(){var e=Object(ee["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.collection.doc(t).get();case 2:return n=e.sent,e.abrupt("return",n.exists?n.data():null);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"update",value:function(e,t){return this.collection.doc(e).update(t)}},{key:"destroy",value:function(e){return this.collection.doc(e).delete()}},{key:"useLoad",value:function(){var e=Object(r["s"])([]),t=this.collection.onSnapshot((function(t){e.value=t.docs.map((function(e){return Object(le["a"])({id:e.id},e.data())}))}));return Object(r["m"])(t),e}}]),e}(),je=Oe,ve=Object(be["a"])({state:{desks:[],products:[],orders:[]},mutations:{initializeApp:function(e){for(var t=["desk","product","order","bill"],n=0,r=t;n<r.length;n++){var c=r[n],o=new je(c+"s");e["".concat(c,"Collection")]=o,e[c+"s"]=o.useLoad()}}},actions:{checkout:function(e,t){var n=e.state,r=[],c=0;t.forEach((function(e){var t=n.products.find((function(t){return t.num===e.productNum}));r.push({product:t.name,price:t.price,amount:e.amount,subtotal:t.price*e.amount}),c+=t.price*e.amount,n.orderCollection.update(e.id,Object(le["a"])(Object(le["a"])({},e),{},{isBilled:!0}))})),n.billCollection.create({orders:r,total:c,deskNum:t[0].deskNum,time:new Date})},createOrder:function(e,t){var n=e.state,r=n.orders.find((function(e){return e.deskNum===t.deskNum&&e.productNum===t.productNum&&!e.isBilled}));if(r){var c=Object(le["a"])(Object(le["a"])({},r),{},{amount:r.amount+t.amount});n.orderCollection.update(r.id,c)}else n.orderCollection.create(t)}},modules:{}});de.beforeEach((function(e,t,n){var r=e.matched.some((function(e){return e.meta.requiresAuth})),c=ce.auth().currentUser;r&&!c?n("/login"):n()})),ce.auth().onAuthStateChanged((function(){ie||(ie=Object(r["c"])(i).use(ve).use(de).mount("#app"))}))},"57d0":function(e,t,n){},"6d69":function(e,t,n){"use strict";n("165c")},"9e4b":function(e,t,n){},b874:function(e,t,n){e.exports=n.p+"img/redkit.35180d40.jpeg"},c280:function(e,t,n){},c6e3:function(e,t,n){},cb0b:function(e,t,n){"use strict";n("c280")},dff3:function(e,t,n){},e53d:function(e,t,n){"use strict";n("9e4b")},fa19:function(e,t,n){"use strict";n("dff3")}});
//# sourceMappingURL=app.7e62fc89.js.map